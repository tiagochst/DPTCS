%% General Info
\NeedsTeXFormat{LaTeX2e}[1999/01/01]
\ProvidesPackage{tcs}[2011/10/25]

% Variables
\newif\if@algo \@algofalse
\newif\if@listings \@listingsfalse
\newcounter{moncompteur}

\DeclareOption{listings}{\@listingstrue} % if listing in options so @listings=true!
\DeclareOption{algo}{\@algotrue} % if listing in options so @listings=true!


\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{babel}}
\ProcessOptions

%% Chargement des extensions
\RequirePackage[dvips]{graphicx}


%language
\RequirePackage[T1]{fontenc}
\RequirePackage{babel}
\RequirePackage[utf8]{inputenc}   % acentuação
\RequirePackage{ae,aecompl,aeguill}  % pdfs plus beaux =)
\RequirePackage{dsfont}

\RequirePackage[linkbordercolor={1 1 1},urlcolor=black,colorlinks=false]{hyperref} % links
%\RequirePackage{subfigure}
\RequirePackage[letterpaper]{geometry}
\geometry{verbose,lmargin=3cm,rmargin=3cm}

%%% autres %%%
\RequirePackage{ifthen}
\RequirePackage{multirow}
\RequirePackage{textcomp}
\RequirePackage{color}       
\RequirePackage{indentfirst} 
\RequirePackage{multicol} 
\RequirePackage{amsfonts}
\RequirePackage{subfig}
\RequirePackage{amsmath} 
%\RequirePackage{pgfplots} % graphics
\RequirePackage{setspace}


% Ifs
\if@listings
  \RequirePackage{listings}
  \RequirePackage{verbatim}
  \RequirePackage{moreverb}
\fi

\if@algo
  \RequirePackage{algorithm}
  \RequirePackage{algorithmic}
\fi

%% Définition des commandes

%COVER%
\newcommand*{\titleTMB}{ 
 \begin{figure}[h!]
    \begin{center}
      \includegraphics[scale=0.35]{telcom}
    \end{center}
  \end{figure}
  \vspace*{80pt}
   \begingroup \centering 
  {\large\scshape \ttabrv  \ttabrvxt } \\[0.2\baselineskip] 
  \rule{11.0cm}{1.6pt}\vspace*{-\baselineskip}\vspace*{2pt}
  \rule{11.0cm}{0.4pt}\\[\baselineskip] 
  {\LARGE \mytitle }\\\vspace*{\baselineskip} 
  {\itshape \mysubtitle }\\
  \rule{11.0cm}{0.4pt}\vspace*{-\baselineskip}\vspace{3.2pt}
  \rule{11.0cm}{1.6pt}\\[\baselineskip]
  {\large\scshape Professeur: \ttprofname}\par
  \vfill {\normalsize \scshape 
    \begin{center} 
      \begin{tabular}{ l l p{5cm} } 
        \ttauthi & \ttxti \\
      \end{tabular}
    \end{center} 
    \itshape \ttdate }\\
  [\baselineskip] \vspace{3.2pt}
  \endgroup}

\renewcommand{\thefigure}{\arabic{figure}}

\newcommand{\spc}[1]
{
  \ifthenelse{\equal{#1}{1}}{\singlespacing}{}
  \ifthenelse{\equal{#1}{1.5}}{\onehalfspacing}{}
  \ifthenelse{\equal{#1}{2}}{\doublespacing}{}
}


% Programming

%%% usado para codigo %%%
\usepackage{listings}
\lstset{
  language = C,
  basicstyle=\scriptsize\ttfamily, 
%  basicstyle=\footnotesize\ttfamily, 
  numbers=left,               
  numberstyle=\tiny,         
  numbersep=5pt,             
  tabsize=2,                  
  extendedchars=true,  
  breaklines=true,       
  keywordstyle=\color{blue},
  % frame=b,         
  stringstyle=\color{green}\ttfamily, 
  showspaces=false,          
  showtabs=false,             
  xleftmargin=17pt,
  framexleftmargin=17pt,
  framexrightmargin=5pt,
  commentstyle=\color[rgb]{0.133,0.545,0.133},
  stringstyle=\color[rgb]{0.627,0.126,0.941},
  framexbottommargin=4pt,
  showstringspaces=false              
}
\lstloadlanguages{C}
\usepackage{caption}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFont{green}{\color{green}}
\DeclareCaptionFormat{listing}{{\colorbox[cmyk]{1,1,1,1}{
      \parbox{7.5cm}{\centering #1#2#3}}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,footnotesize}}


%% Fin du package
\endinput